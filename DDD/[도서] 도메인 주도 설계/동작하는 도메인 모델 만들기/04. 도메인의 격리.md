# 04. 도메인의 격리

* 객체지향 프로그램에서는 종종 도메인 비즈니스와 관련된 로직이 UI, DB 스크립트에 들어감
  * 이런 일이 발생하는 이유는?
    * 단기적으로 이렇게 하는 것이 뭔가를 동작하게 하는 가장 쉬운 방법
  * 문제는?
    * 도메인에 관련된 코드를 확인하고 추론하기가 굉장히 힘들어짐
    * UI나 DB스크립트를 변경하면 실질적으로 비즈니스가 변경될 수도 있음
    * 자동화 테스트가 어려워짐
  
 
* 계층형 아키텍처를 통해 관심사 분리가 필요
   

* 계층형 아키텍처
  * UI 계층 
    * 사용자에게 정보 반환
    * 사용자의 명령 해석
  * 응용 계층
    * 소프트웨어가 수행할 작업 정의
    * 도메인 객체가 문제를 해결하도록 함
    * 다른 시스템의 응용 계층과 상호작용
    * 비즈니스 로직/지식이 포함되지 않으며 작업을 조정함
    * 도메인 계층에게 작업을 위임
    * 비즈니스와 관련된 상태는 없음
    * 사용자, 프로그램의 작업에 대한 진행상황을 반영하는 상태는 가질 수 있음
  * 도메인 계층
    * 비즈니스 로직
    * 비즈니스와 관련된 상태를 가지며 제어함
    * 상태 저장은 인프라스트럭처에 위임
  * 인프라스트럭처 계층
    * 일반화된 기술정 기능 제공
    * 애플리케이션에 대한 메시지 전송
    * 도메인 영속화
   
    
1. 각 계층을 응집력 있게 나눈다
2. 각 계층에서 설계를 발전시킨다
3. 상위 계층과 결합을 느슨하게 유지한다
4. 도메인 모델과 관련된 코드는 모두 한 계층에 모은다
5. 도메인 모델은 UI, 응용, 인프라스트럭처 코드와 격리한다
6. 도메인 모델은 도메인을 표현하는 것에만 집중한다